events {

}

http {
  server {
    listen 80;
    server_name     card-exchange.com www.card-exchange.com;


    location /ping {
        return 200 'pong'; # response for test
    }

    location ~* ^/public/(.*) {
        proxy_pass http://user-api-service:5004; # redirect to user microservice for login and signup
    }

    location ~* ^/secured/(.*) {
        auth_jwt "API" token=$arg_apijwt; # getting the JWT token

        proxy_pass http://auth-api-service:5000/verifyJWTToken/$token;

        #proxy_pass http://auth-api-service:5000/verifyJWTToken/{token}; # redirect to auth microservice for login and signup
    }


    location ~* ^/private/(.*) {
       deny all;
    }
  }
}
